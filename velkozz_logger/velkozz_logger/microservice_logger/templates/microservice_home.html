{% extends "layout.html" %}

{% block css %}
    <link rel="stylesheet" href="{{ url_for('microservice_bp.static', filename='microservice_grid_styling.css') }}">
{% endblock css %}

{% block body %}
    <div class="main_microservice_body">

        <div class="page-intro">
            <h1>This is the Microservices Home Page Where all microservices should be displayed</h1>
            <a href="{{ url_for('microservice_bp.microservice_creation_form') }}">microservice creation form</a>
            <div id="chart" class="chart"></div>
        </div>

        <div class="microservice_grid">

            {% for microservice in microservices %}
                <div class="microservice">
                    <h1>{{microservice.microservice_name}}</h1>
                    <p>{{microservice.microservice_description}}</p>
                    <div class="{{microservice.microservice_name}}" id={{microservice.microservice_name}}></div>
                </div>
            {% endfor %}    
        </div>

    </div>

    {% block javascript %}
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script>
        // Main Graph Plot:
        var graphs= {{graphJSON | safe}};
        Plotly.plot("chart", graphs, {});

        {% for microservice in microservices %}
            // Individual Microservice TimeSeries:
            var microservice_graph = {{microservice.timeseries | safe}};
            Plotly.plot("{{microservice.microservice_name}}", microservice_graph, {});
        {% endfor %}
    </script>
    {% endblock javascript %}

{% endblock body %}